---
title: Scaling with PowerDNS and EveryDNS
created_at: 2008-11-10 20:20:36 -0500
kind: article
---
Ah DNS, the often overlooked aspect of running websites.  Many people I've spoken to bought a domain from Network Solutions, then one from GoDaddy, and maybe one or two from their web-hosting provider.  Settings are all over the place, and they use the tools provided by each registrar to manage the DNS for domains purchased there.  While this certainly works, it can become quite a hassle to change things around especially if you want an overview of all of your domains or need to change the IP address of a server. 

Several years ago, I found out about <a href="http://www.everydns.com/">EveryDNS</a> which is a great free DNS hosting service. They've been very solid and while they have been down a few times from DDOS attacks at 50Mbps+, they definitely can scale better than my little rack of servers. I donated some money to them and currently have about 60 domains with ~600 DNS entries total hosted with them.  With EveryDNS, all of my DNS entries are in the same place and when someone purchases hosting from me, I have them set the authoritative nameservers for their domain to the EveryDNS nameservers. This means that I don't need access to their account information, but I can have quick and easy access to DNS entries if I need to move anything around.

I'm preparing to make some big changes to my servers and the hassle of the point-and-click interface becomes a bit to much.  ~1800 clicks or so is a lot more complicated than it needs to be!  Additionally, for almost everything else I do on the internet, I prefer to own the hardware and software that my information lives on.  To address both of these, I installed <a href="http://www.powerdns.com/">PowerDNS</a> with a <a href="http://doc.powerdns.com/configuring-db-connection.html">MySQL backend</a> on a server, and then set up DNS replication to EveryDNS (<a href="http://faq.everybox.com/secondary-domain/example-setup">docs on this</a>).  PowerDNS with MySQL let's me change the IP address of a server with one SQL statement instead of lots of mouse clicking, regardless of how many domains I have. This setup also allows me to include DNS configuration as part of my web hosting provisioning scripts which greatly simplifies the process of adding a new website to one of my servers. My DNS server is not listed in the authoritative servers list for domains, so the only queries that it responds to are the AXFR queries from EveryDNS.  The only negative of this is that EveryDNS only checks once an hour so I can't do any tinkering with short TTLs, but thats a price I'm willing to pay for now!  Hopefully they will enable DNS Notify support in the future which would allow for instantaneous updates, and if my hosting operation gets big enough, I'll just roll my own live DNS servers. 

